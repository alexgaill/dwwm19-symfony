<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>
		<link
		rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
		{# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> {% block stylesheets %}{% endblock %}{% block javascripts %}{% endblock %}
		</head>
		<body>
			<header>
				<nav class="navbar navbar-expand-lg navbar-light bg-light">
					<div class="container-fluid">
						<a class="navbar-brand" href="{{path('accueil')}}">SuperBlog</a>
						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav me-auto mb-2 mb-lg-0">
								<li class="nav-item">
									<a class="nav-link" href="{{path('app_category')}}">Catégories</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="{{path('app_post')}}">Articles</a>
								</li>
								{# Si l'utilisateur a le rôle ROLE_ADMIN, il verra le lien ajouter article #}
								{% if is_granted('ROLE_ADMIN') %}
									<li class="nav-item">
										<a class="nav-link" href="{{path('save_post')}}">Ajouter article</a>
									</li>
								{% endif %}
								{# 
									Si l'utilisateur est connecté il verra le lien déconnexion
									sinon il verra les liens inscription et connexion
								 #}
								{% if app.user %}
									<li class="nav-item">
										<a class="nav-link" href="{{path('app_logout')}}">Déconnexion</a>
									</li>
								{% else %}
									<li class="nav-item">
										<a class="nav-link" href="{{path('app_register')}}">Inscription</a>
									</li>	
									<li class="nav-item">
										<a class="nav-link" href="{{path('app_login')}}">Connexion</a>
									</li>	
								{% endif %}
							</ul>
						</div>
					</div>
				</nav>
				{# Affichage des alertes générées dans les controller #}
				<div
					class="my-3">
					{# On récupère le type et les messages de chaque message flash #}
					{% for type, messages in app.flashes %}
						{# On génère l'alerte #}
						<div
							class="alert alert-{{type}}  alert-dismissible fade show" role="alert">
							{# On parcourt les messages pour les afficher #}
							{% for message in messages %}
								{{message}}
							{% endfor %}
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
					{% endfor %}
				</div>
			</header>
			<main class="container"> {% block body %}{% endblock %}
				</main>
				<footer></footer>
				<script>
					$('.alert').alert()
				</script>
				<script src="{{ asset('js/main.js') }}"></script>
				<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
			</body>
		</html>
